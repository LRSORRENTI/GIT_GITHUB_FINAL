<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/HOME/style.css" />
    <title>Git Reflogs</title>
  </head>
  <body>
    <nav id="mainNav" class="navbar sticky-top bg-light navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand" href="#"></a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavDropdown"
          aria-controls="navbarNavDropdown"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/index.html"
                >Home</a
              >
            </li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Git & GitHub Notes Sections
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="/index.html">Home</a></li>
                <li>
                  <a class="dropdown-item" href="/index2.html">Intro To Git</a>
                </li>
                <li>
                  <a class="dropdown-item" href="/index3.html"
                    >Git Installation & Setup</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/index4.html"
                    >Commits / Git Ignore / Git Docs</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/index5.html"
                    >Git Diff & Git Stash</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/index6.html"
                    >Undoing Changes / Time-Traveling</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/index7.html"
                    >Intro To GitHub</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/index8.html"
                    >Fetching & Pulling</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/index9.html"
                    >GitHub Grab-Bag: Odds & Ends</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/index10.html">Workflow</a>
                </li>
                <li>
                  <a class="dropdown-item" href="/index11.html">Rebasing</a>
                </li>
                <li>
                  <a class="dropdown-item" href="/index12.html">Git Tags</a>
                </li>
                <li>
                  <a class="dropdown-item" href="/index13.html"
                    >Git: Hashing, Objects, Blobs</a
                  >
                </li>
                <li>
                  <a class="dropdown-item" href="/index14.html">Reflogs</a>
                </li>
                <li>
                  <a class="dropdown-item" href="/index15.html">Git Aliases</a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <h2>The power of "REFLOGS", retrieving "lost" work</h2>
    <h3>
      The reason the REFLOG command is used is when we've messed something up,
      when we've lost a commit, or rebased when we shouldn't have, or if we want
      to undo something that seems undo-able, often we can fix things with
      REFLOG, REFLOG may be something you'll only need to google in a time of
      need
    </h3>
    <h3>
      Important:
      <ul>
        <li>Exploring REFLOG files</li>
        <li>The git reflog command</li>
        <li>Rescuing lost commits with reflog</li>
        <li>Undoing rebases with reflog</li>
      </ul>
      Nice to have:
      <ul>
        <li>Time-based reflog qualifiers</li>
      </ul>
    </h3>
    <h2>Introducing REFLOGS</h2>
    <h3>
      The term reflog is short for 'reference logs', they're essentially a
      transcript or receipt that git keeps for us, whenever references are
      updated, git keeps a record of when the tips of branches and other
      references were updated in the repo, and we can view and update these
      reference logs using the git reflog command
    </h3>
    <h3>
      References in git are also commonly referred to as pointers, are things
      like bramch references, every branch in our repo has a branch reference,
      like main branch pointer points to main, feature branch pointer points to
      feature, and the HEAD pointer can reference a branch or a commit in
      detached HEAD
    </h3>

    <h3>
      There are others as well, like for remote branches, fetch HEAD, merge
      HEAD, there are different references in git
    </h3>
    <h3>
      If we look at HEAD as an example, HEAD could have a reflog that looks
      like:
      <ul>
        <li>- Commit G - New commit</li>
        <li>- Commit H - New commit</li>
        <li>- Commit D -Switch to main from feature</li>
        <li>- Commit H - Switched to feature from main</li>
      </ul>
    </h3>

    <h3>
      Okay so colt just used the command: ls -a , then cd .git/logs, then code
      HEAD, and a huge file full of logs that git stored popped up in VSCODE, as
      an example if we leave that HEAD file open in VSCODE, then switch to
      another branch in the terminal, our HEAD file in VSCODE auto-updates
      logging the switch we just made
    </h3>
    <h3>
      Git tracks our moves, or it tracks the HEAD rather, and git keeps logs for
      us. It keeps track of the tip of EVERY branch, even remote branches, git
      tracks them... git is watching me O.o..
    </h3>

    <h2>The limitations of REFLOGS</h2>

    <h3>
      Git only keeps reflogs on your local activity, they are not shared with
      collaborators, and they also expire, Git cleans out old entries after 90
      days, though this can be configured
    </h3>
    <h2>
      The 'git reflog show' command, the git reflog command accepts the
      sub-commands:
      <h3>
        <ul>
          <li>git reflog show</li>
          <li>git reflog expire</li>
          <li>git reflog delete</li>
          <li>git reflog exists</li>
        </ul>
        For example, if we want to view the logs for the tip of the main branch,
        we enter: git reflog show main
      </h3>
    </h2>
    <h3>
      The show command is the important one, it's the main command that's used,
      the others are more specific and not used very often
    </h3>

    <h3>
      After entering git reflog show HEAD, git displays: $ git reflog show HEAD
      b02a974 (HEAD -> note-taking, origin/note-taking) HEAD@{0}: checkout:
      moving from main to note-taking 4d6e557 (origin/main, main) HEAD@{1}:
      checkout: moving from note-taking to main b02a974 (HEAD -> note-taking,
      origin/note-taking) HEAD@{2}: commit: added intro to git reflogs aa88ef5
      HEAD@{3}: commit: finished section on: git behind the scenes 095aa11
      HEAD@{4}: commit: added intro to git objects: commits aae2db5 HEAD@{5}:
      commit: finished section on GIT TREES, added intro to git objects (git
      commits) 51847aa HEAD@{6}: checkout: moving from main to note-taking
      4d6e557 (origin/main, main) HEAD@{7}: checkout: moving from note-taking to
      main 51847aa HEAD@{8}: commit: added intro to viewing TREES with the
      syntax git cat-file -p main^{tree} or it would be branchname^{tree} like
      for this repo note-taking^{tree} d262b5a HEAD@{9}: commit: added info on
      git cat-file -p object-hash, and how it displays the contents of that with
      the -p flag, also added intro to BLOBS 403dd85 HEAD@{10}: commit: added
      more info on git hash-object command, following colt's exercise eb2c325
      HEAD@{11}: commit: added info on cryptographic hashing functions like
      SHA-1 and ECDSA ac2098a HEAD@{12}: commit: added info on the git objects
      folder cfd964c HEAD@{13}: commit: added info on the HEAD file 6317c5d
      HEAD@{14}: commit: added notes
    </h3>
    <h3>
      The main takeaway here is that when we use git reflog VS. git log
      --oneline, reflog shows everything, it shows all changes made with HEAD,
      git log --oneline displays a clear history from one commit to it's parent,
      it doesn't display things that were rebased, lost, deleted etc.. git
      reflog does show those
    </h3>
    <h3>
      And know that the above output like: aa88ef5 HEAD@{3}: commit: finished
      section on: git behind the scenes the '@{3}' is showing the current value
      stored at {3}, but if we switch branches or change something, that
      specific commit value becomes {4}, since we now have a new reflog instance
      occupying the HEAD@{0} position, the {num} displays the current list, but
      those numbers dynamically change all the time when branches are switched
      to or things are changed in anyway
    </h3>
    <h3>
      We could also pass in other branches to reflog, instead of git reflog show
      HEAD, if we enter git reflog show note-taking, this is displayed:
    </h3>
    <h3>
      $ git reflog show note-taking b02a974 (HEAD -> note-taking,
      origin/note-taking) note-taking@{0}: commit: added intro to git reflogs
      aa88ef5 note-taking@{1}: commit: finished section on: git behind the
      scenes 095aa11 note-taking@{2}: commit: added intro to git objects:
      commits aae2db5 note-taking@{3}: commit: finished section on GIT TREES,
      added intro to git objects (git commits) 51847aa note-taking@{4}: commit:
      added intro to viewing TREES with the syntax git cat-file -p main^{tree}
      or it would be branchname^{tree} like for this repo note-taking^{tree}
      d262b5a note-taking@{5}: commit: added info on git cat-file -p
      object-hash, and how it displays the contents of that with the -p flag,
      also added intro to BLOBS 403dd85 note-taking@{6}: commit: added more info
      on git hash-object command, following colt's exercise eb2c325
      note-taking@{7}: commit: added info on cryptographic hashing functions
      like SHA-1 and ECDSA ac2098a note-taking@{8}: commit: added info on the
      git objects folder cfd964c note-taking@{9}: commit: added info on the HEAD
      file 6317c5d note-taking@{10}: commit: added notes 8edb8d7
      note-taking@{11}: commit: added bullet points to hashing/objects section
      9aa8476 note-taking@{12}: commit: added info on pushing/replacing/deleting
      tags 850f2b4 note-taking@{13}: commit: added info on how to append
      messages to our tags, and how we view tag messages with the git show
      tagname command 6254200 note-taking@{14}: commit: added info on searching
      for specific tag names
    </h3>
    <h3>
      I just added and commited again, now if we type the same command git
      reflog show note-taking, you'll see the note-taking{0} has changed
    </h3>

    <h3>
      $ git reflog show note-taking 49ed6ff (HEAD -> note-taking,
      origin/note-taking) note-taking@{0}: commit: added info on reflog
      commands, and what they let us view b02a974 note-taking@{1}: commit: added
      intro to git reflogs aa88ef5 note-taking@{2}: commit: finished section on:
      git behind the scenes 095aa11 note-taking@{3}: commit: added intro to git
      objects: commits aae2db5 note-taking@{4}: commit: finished section on GIT
      TREES, added intro to git objects (git commits) 51847aa note-taking@{5}:
      commit: added intro to viewing TREES with the syntax git cat-file -p
      main^{tree} or it would be branchname^{tree} like for this repo
      note-taking^{tree} d262b5a note-taking@{6}: commit: added info on git
      cat-file -p object-hash, and how it displays the contents of that with the
      -p flag, also added intro to BLOBS 403dd85 note-taking@{7}: commit: added
      more info on git hash-object command, following colt's exercise eb2c325
      note-taking@{8}: commit: added info on cryptographic hashing functions
      like SHA-1 and ECDSA ac2098a note-taking@{9}: commit: added info on the
      git objects folder cfd964c note-taking@{10}: commit: added info on the
      HEAD file 6317c5d note-taking@{11}: commit: added notes 8edb8d7
      note-taking@{12}: commit: added bullet points to hashing/objects section
      9aa8476 note-taking@{13}: commit: added info on pushing/replacing/deleting
      tags 850f2b4 note-taking@{14}: commit: added info on how to append
      messages to our tags, and how we view tag messages with the git show
      tagname command
    </h3>
    <h2>Passing Reflog References Around</h2>
    <h3>
      We can access specific git refs with: name@{qualifier} syntax, this is
      used to access specific ref pointers and can pass them to other commands
      including: checkout, reset, and merge
    </h3>
    <h3>
      So we could enter: git reflog show HEAD@{10}, and this shows everything
      from the beginning of the repo, all the way up to 10
    </h3>
    <h2>Time Based Reflog Qualifiers</h2>
    <h3>
      Every entry in the reference logs has a timestamp, associated with it, we
      can filter reflogs entries by time/date qualifiers like :
      <ul>
        <li>3.minutes.ago</li>
        <li>yesterday</li>
        <li>2.days.ago</li>
        <li>Fri, 12 Feb 2021 14:06:21 -0800</li>
      </ul>
    </h3>
    <h3>
      Rememebr that HEAD file in our .git/log shows a list of our HEAD history,
      for ex: 1664373864 -0500 commit: added info on reflog commands, and what
      they let us view
    </h3>
    <h3>The '1664373864' portion of that log is a UNIX TIMESTAMP</h3>
    <h3>
      But an easier way to check is with the command: git diff main
      main@{yesterday}, and git will display the changes made since the master
      branch yesterday
    </h3>
    <h3>
      We could also look at the differences in head from 2 days ago with: git
      reflog show HEAD@{2.days.ago}, and it will display a timed log of the
      changes made:
    </h3>

    <h3>
      $ git reflog show HEAD@{2.days.ago} 9aa8476 HEAD@{Mon Sep 26 09:13:41 2022
      -0500}: checkout: moving from main to note-taking 4d6e557 (origin/main,
      main) HEAD@{Mon Sep 26 09:11:56 2022 -0500}: merge note-taking: Merge made
      by the 'recursive' strategy. 3bbbd81 HEAD@{Mon Sep 26 09:11:49 2022
      -0500}: checkout: moving from note-taking to main 9aa8476 HEAD@{Mon Sep 26
      09:10:55 2022 -0500}: commit: added info on pushing/replacing/deleting
      tags 850f2b4 HEAD@{Mon Sep 26 08:56:38 2022 -0500}: commit: added info on
      how to append messages to our tags, and how we view tag messages with the
      git show tagname command 6254200 HEAD@{Mon Sep 26 08:37:02 2022 -0500}:
      commit: added info on searching for specific tag names 711b759 HEAD@{Mon
      Sep 26 08:22:48 2022 -0500}: commit: added info on semantic versioning
      850f9c9 HEAD@{Mon Sep 26 07:49:19 2022 -0500}: commit: added bullet points
      to intro of git tags f5680ce HEAD@{Mon Sep 26 07:48:35 2022 -0500}:
      checkout: moving from main to note-taking 3bbbd81 HEAD@{Sat Sep 24
      18:04:57 2022 -0500}: merge note-taking: Merge made by the 'recursive'
      strategy. f36f957 HEAD@{Sat Sep 24 18:04:51 2022 -0500}: checkout: moving
      from note-taking to main
    </h3>
    <h3>
      We can pass in many different values into the @{}, like @{one.minute.ago}
      or @{5.days.ago} and git will display the log based on your input, it even
      works with weeks ago or months ago, like if we want to look at the main
      branch a week ago we could enter: git checkout main@{1.week.ago} and it
      will show what the main branch looked like exactly one week ago, or to be
      more precise, git will find the closest timestamp to one week ago, could
      be 7 days, 2 hours , 5 minutes ago
    </h3>

    <h2>Rescuing lost commits with REFLOG</h2>
    <h3>
      We can use reflog to access commits that seem lost or are not appearing in
      git log
    </h3>
    <h3>
      Let's say we have a new repo, and we add a file called veggies.txt, we
      commit a few times, first commit we have brocolli, kale, chard, second
      commit we have cabbage and arugula added, then we commit once more adding
      carrots, and pumpkins, squash, then we decide we want to remove a certain
      commit, remember we can use git log to see our commit hashes, then we
      enter: git reset --hard commithash, to undo the changes, so now carrots,
      pumpkins, and squash are gone, then if we want those veggies back, how do
      we get them?
    </h3>
    <h3>
      That info is still available in the REFLOG, so let's enter: git reflog
      show main, we can see the commit hash that wasn't showing in: git log
      --oneline, we could do git checkout refloghash, it will put us in detached
      HEAD, but let's say we want to undo that hard reset we did, we can enter:
      git reset --hard main@{1} or whatever missing commithash, now carrots,
      pumpkins, and squash are back!
    </h3>
    <h2>Undoing a rebase with REFLOG - It's a miracle!</h2>

    <h3>
      Let's say we have our main branch, then we create a new branch: git switch
      -c Flowers, let's say we're working on a flowers feature branch, we can
      add and commit our flowers.txt file, or initial commit, we add some
      flowers: salmon zinnias, queen lime zinnias, then commit those changes,
      then we add more: dahlias, commit dahlias, add more: coral amaranth,
      commit again, then one last flower: celosia, add/commit again.
    </h3>
    <h3>
      So now we'll do an interactive rebase in VSCODE, so let's enter: git
      rebase -i HEAD~4, so VSCODE opens and we can now change our commits, we
      change 'pick c47ecfc add celosia', to 'fixup c47ecfc add celosia', what
      we'll see is that the content of the commit doesn't go away, just the
      commit hash
    </h3>

    <h3>
      So now if we want we can use git reflog, and we'll see that commit we used
      'fixup' on, we can copy the commit hash we deleted in our interactive
      rebase, and enter git reset --hard deletedcommithash and our content is
      now back
    </h3>
    <h3>
      The main takeaway is that using the power of REFLOGS, we can save or undo
      changes that seem impossible
    </h3>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"
      integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
